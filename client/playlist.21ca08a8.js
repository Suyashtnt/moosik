import{S as t,i as a,s as e,f as s,a as l,t as n,g as r,h as o,c,j as i,d,k as u,b as f,l as h,o as m,u as p,n as v,v as g,w,x as b,y,z as E,A as x,B as U,C as L,D as V,e as $,q as T,m as D,E as I,F as R,r as A,G as j,H as B}from"./client.821c0e89.js";function k(t){let a,e,g,w,b,y,E,x,U,L,V,$,T,D,I,R;return{c(){a=s("div"),e=s("div"),g=s("img"),b=l(),y=s("div"),E=s("h2"),x=n(t[0]),U=l(),L=s("div"),V=n(t[2]),$=l(),T=s("button"),D=n("play"),this.h()},l(s){a=r(s,"DIV",{class:!0});var l=o(a);e=r(l,"DIV",{class:!0});var n=o(e);g=r(n,"IMG",{class:!0,src:!0,alt:!0}),b=c(n),y=r(n,"DIV",{class:!0});var u=o(y);E=r(u,"H2",{class:!0});var f=o(E);x=i(f,t[0]),f.forEach(d),U=c(u),L=r(u,"DIV",{class:!0});var h=o(L);V=i(h,t[2]),h.forEach(d),$=c(u),T=r(u,"BUTTON",{class:!0});var m=o(T);D=i(m,"play"),m.forEach(d),u.forEach(d),n.forEach(d),l.forEach(d),this.h()},h(){u(g,"class","h-16 w-16 md:h-24 md:w-24 rounded mx-auto md:mx-0 md:mr-6"),g.src!==(w=t[1])&&u(g,"src",w),u(g,"alt","Avatar"),u(E,"class","text-lg capitalize"),u(L,"class","text-gray-600"),u(T,"class","btn btn-primary mt-2"),u(y,"class","text-center md:text-left"),u(e,"class","md:flex bg-white rounded-lg p-6"),u(a,"class","shadow-lg leading-normal self-end bg-white rounded-lg m-10 relative")},m(s,l){f(s,a,l),h(a,e),h(e,g),h(e,b),h(e,y),h(y,E),h(E,x),h(y,U),h(y,L),h(L,V),h(y,$),h(y,T),h(T,D),I||(R=m(T,"click",t[3]),I=!0)},p(t,[a]){2&a&&g.src!==(w=t[1])&&u(g,"src",w),1&a&&p(x,t[0]),4&a&&p(V,t[2])},i:v,o:v,d(t){t&&d(a),I=!1,R()}}}function N(t,a,e){const s=g();let{name:l}=a,{parsedUrl:n}=a,{thumb:r}=a,{VideoURL:o}=a;return t.$$set=t=>{"name"in t&&e(0,l=t.name),"parsedUrl"in t&&e(4,n=t.parsedUrl),"thumb"in t&&e(1,r=t.thumb),"VideoURL"in t&&e(2,o=t.VideoURL)},[l,r,o,function(){s("play",{url:n})},n]}class P extends t{constructor(t){super(),a(this,t,N,k,e,{name:0,parsedUrl:4,thumb:1,VideoURL:2})}}function O(t,a,e){const s=t.slice();return s[7]=a[e],s}function q(t){let a,e;const s=[t[7]];let l={};for(let t=0;t<s.length;t+=1)l=j(l,s[t]);return a=new P({props:l}),a.$on("play",z),{c(){w(a.$$.fragment)},l(t){b(a.$$.fragment,t)},m(t,s){y(a,t,s),e=!0},p(t,e){const l=1&e?E(s,[x(t[7])]):{};a.$set(l)},i(t){e||(U(a.$$.fragment,t),e=!0)},o(t){L(a.$$.fragment,t),e=!1},d(t){V(a,t)}}}function G(t){let a,e,p,v,g,w,b,y,E,x,V,j,k,N,P,G,z,F,H,M=t[0],C=[];for(let a=0;a<M.length;a+=1)C[a]=q(O(t,M,a));const S=t=>L(C[t],1,1,()=>{C[t]=null});return{c(){a=l(),e=s("div"),p=s("form"),v=s("div"),g=s("label"),w=n("URL"),b=l(),y=s("input"),E=l(),x=s("button"),V=n("Add to playlist"),j=l(),k=s("button"),N=n("Play all"),P=l();for(let t=0;t<C.length;t+=1)C[t].c();G=$(),this.h()},l(t){T('[data-svelte="svelte-2986pj"]',document.head).forEach(d),a=c(t),e=r(t,"DIV",{class:!0});var s=o(e);p=r(s,"FORM",{class:!0});var l=o(p);v=r(l,"DIV",{class:!0});var n=o(v);g=r(n,"LABEL",{class:!0,for:!0});var u=o(g);w=i(u,"URL"),u.forEach(d),b=c(n),y=r(n,"INPUT",{class:!0,id:!0,type:!0,placeholder:!0}),n.forEach(d),E=c(l),x=r(l,"BUTTON",{class:!0});var f=o(x);V=i(f,"Add to playlist"),f.forEach(d),j=c(l),k=r(l,"BUTTON",{class:!0});var h=o(k);N=i(h,"Play all"),h.forEach(d),l.forEach(d),s.forEach(d),P=c(t);for(let a=0;a<C.length;a+=1)C[a].l(t);G=$(),this.h()},h(){document.title="Playlist",u(g,"class","block text-gray-700 text-sm font-bold mb-2"),u(g,"for","username"),u(y,"class","shadow appearance-none border rounded w-full py-2 px-3\n        text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),u(y,"id","username"),u(y,"type","text"),u(y,"placeholder","Youtube Video URL"),u(v,"class","mb-4"),u(x,"class","btn btn-primary mt-2 float-left"),u(k,"class","btn btn-primary mt-2 float-right"),u(p,"class","bg-white shadow-md clearfix rounded px-8 pt-6 pb-8 mb-4 svelte-1erwrqy"),u(e,"class","w-full center clearfix svelte-1erwrqy")},m(s,l){f(s,a,l),f(s,e,l),h(e,p),h(p,v),h(v,g),h(g,w),h(v,b),h(v,y),D(y,t[1]),h(p,E),h(p,x),h(x,V),h(p,j),h(p,k),h(k,N),f(s,P,l);for(let t=0;t<C.length;t+=1)C[t].m(s,l);f(s,G,l),z=!0,F||(H=[m(y,"input",t[4]),m(x,"click",t[5]),m(k,"click",t[6])],F=!0)},p(t,[a]){if(2&a&&y.value!==t[1]&&D(y,t[1]),1&a){let e;for(M=t[0],e=0;e<M.length;e+=1){const s=O(t,M,e);C[e]?(C[e].p(s,a),U(C[e],1)):(C[e]=q(s),C[e].c(),U(C[e],1),C[e].m(G.parentNode,G))}for(B(),e=M.length;e<C.length;e+=1)S(e);I()}},i(t){if(!z){for(let t=0;t<M.length;t+=1)U(C[t]);z=!0}},o(t){C=C.filter(Boolean);for(let t=0;t<C.length;t+=1)L(C[t]);z=!1},d(t){t&&d(a),t&&d(e),t&&d(P),R(C,t),t&&d(G),F=!1,A(H)}}}async function z(t){const a=new Audio(await t.detail.url);await a.play()}function F(t){return t.play().then(()=>new Promise((a,e)=>{function s(){t.removeEventListener("error",l),a()}function l(){t.removeEventListener("ended",s),e(err)}t.addEventListener("ended",s,{once:!0}),t.addEventListener("error",l,{once:!0})}))}function H(t,a,e){var s,l=[];async function n(t){var a=await async function(t){const a=!(!(e=t.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/))||11!=e[7].length)&&e[7];var e;console.log(a),console.log("https://www.yt-mp3s.com/@api/json/mp3/"+a);const s=await fetch("https://www.yt-mp3s.com/@api/json/mp3/"+a,{method:"GET",mode:"cors",headers:{}}),l=await s.json(),n={parsedUrl:await l.vidInfo[0].dloadUrl,name:await l.vidTitle,thumb:await l.vidThumb,VideoURL:t};return console.log(n),n}(t);e(0,l=[...l,await a]),console.log(l)}async function r(){for(let t=0;t<l.length;t++){const a=new Audio(l[t].parsedUrl);await F(a)}}return[l,s,n,r,function(){s=this.value,e(1,s)},t=>{t.preventDefault(),n(s)},t=>{t.preventDefault(),r()}]}export default class extends t{constructor(t){super(),a(this,t,H,G,e,{})}}
